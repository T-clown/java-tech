[线上故障如何快速排查？来看这套技巧大全](https://mp.weixin.qq.com/s/BXtr0IFMY7Azh9820DqZhQ)

### 常用命令

1. grep(文件内容查找)
2. find(文件查找)
3. uptime：查看机器的启动时间、登录用户、平均负载等情况
4. lsof
    - lsof -i:8030(查看使用8030端口的进程id)
5. ulimit
6. scp（文件传输）
7. vim(文本编辑)
8. awk(文本分析)
9. set(文本编辑和替换)
10. tr(字符替换)
11. cut(选取命令，分析一段数据并取出我们想要的部分)
12. wc(统计字数和行数)
13. sort(排序)
14. unip(去重或分组统计)
15. zip(压缩成zip格式的压缩包或者解压)
16. tar(创建或者解压tar格式的包)

### 查看进程

1. ps (ps -ef | grep 服务名称)
2. top(升级版本htop)
    - top -Hp 进程id：查看CPU负载最高的线程
3. pidstat
    - 用于监控全部或指定的进程占用系统资源的情况，包括 CPU、内存、磁盘 I/O、线程切换、线程数等数据
    - pidstat -urd -p 进程号

### 查看内存

1. free -h :查看内存使用情况
2. pmap :此命令用来报告进程中各个模块占用内存的具体情况，显示比较底层的进程模块占用内存的信息，并且可以打印内存的起止地址等，用于定位深层次JVM或者操作系统的内存问题

### 查看CPU使用情况

1. vmstat(此命令显示关于内核线程、虚拟内存、磁盘I/O、陷阱和CPU占用率的统计信息)
    - buff是I/O系统存储的磁盘块文件的元数据的统计信息。
    - cache是操作系统用来缓存磁盘数据的缓冲区，操作系统会自动调节这个参数，在内存紧张时操作系统会减少cache的占用空间来保证其他进程可用。
    - cs参数表示线程环境的切换次数，此数据太大时表明线程的同步机制有问题。
    - si和so较大时，说明系统频繁使用交换区，应该查看操作系统的内存是否够用。
    - bi和bo代表I/O活动，根据其大小可以知道磁盘I/O的负载情况
2. mpstat

### 监控磁盘

1. ostat -x
2. df -h 获取磁盘状态
3. du -h 查看文件夹大小
4. ll -h 查看文件大小

### 查看网络信息和网络监控命令
1. ifconfig
2. ping 网址(测试一台主机到另外一台主机的网络是否连通)
3. telnet IP PORT(本地计算机上连接远程主机)
4. nc
5. mtr -r sina.com(网络连通性测试工具，也可以用来检测丢包率)
6. nslookup sina.com(检测网络中DNS服务器能否正确解析域名)
7. sar -n DEV 1 1
8. netstat
   - 根据进程查找端口
      1. ps -elf | grep 进程

     
     