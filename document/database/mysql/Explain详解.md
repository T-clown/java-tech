### 查看执行计划

- EXPLAIN + SQL语句

1. type列介绍
    - system ：当表中只有一条记录并且该表使用的存储引擎的统计数据是精确的，比如MyISAM、Memory，那么对该表的 访问方法就是 system
    - const ：当我们根据主键或者唯一二级索引列与常数进行等值匹配时，对单表的访问方法就是 const
    - eq_ref ：在连接查询时，如果被驱动表是通过主键或者唯一二级索引列等值匹配的方式进行访问的（如果该主键或者 唯一二级索引是联合索引的话，所有的索引列都必须进行等值比较），则对该被驱动表的访问方法就是eq_ref
    - ref ：当通过普通的二级索引列与常量进行等值匹配时来查询某个表，那么对该表的访问方法就可能是 ref
    - fulltext ：全文索引
    - ref_or_null ：当对普通二级索引进行等值匹配查询，该索引列的值也可以是 NULL 值时，那么对该表的访问方法就可能是 ref_or_null
    - index_merge :
    - unique_subquery ：类似于两表连接中被驱动表的 eq_ref 访问方法， unique_subquery 是针对在一些包含 IN 子查询的查询语 句中，如果查询优化器决定将 IN 子查询转换为 EXISTS
      子查询，而且子查询可以使用到主键进行等值匹配的话，那么该子查询执行计划的 type 列的值就是 unique_subquery
    - index_subquery ：index_subquery 与 unique_subquery 类似，只不过访问子查询中的表时使用的是普通的索引
    - range ：如果使用索引获取某些 范围区间 的记录，那么就可能使用到 range 访问方法
    - index ：当我们可以使用索引覆盖，但需要扫描全部的索引记录时，该表的访问方法就是 index
    - ALL ：全表扫描

2. key_len索引长度

    - key_len 列表示当优化器决定使用某个索引执行查询时，该索引记录的最大长度，它是由这三个部分构成的：
    -
   对于使用固定长度类型的索引列来说，它实际占用的存储空间的最大长度就是该固定值（如索引类型是int，则key_len=4（如果可以为空，则key_len=4+1），如是long，则key_len=8（如果可以为空，则key_len=8+1））
    - 对于指定字符集的变长类型的索引列来说，比如某个索引列的类型是 VARCHAR(100) ，使用的字符集是 utf8 ，那么该列实际占 用的最大存储空间就是 100 × 3 = 300
      个字节（utf8是utf8mb3的简称，utf8mb4则是100*4，只有utf8mb4能存emoji表情）
    - 如果该索引列可以存储 NULL 值，则 key_len 比不可以存储 NULL 值时多1个字节
    - 对于变长字段来说，都会有2个字节的空间来存储该变长列的实际长度，所以如果索引类型是VARCHAR(100) ，且可以为NULL，则key_len=3*100+1+2=303
    - 可以通过key_len的数值判断联合索引用到了几个索引，如A_B联合索引，A的索引长度是5，B的索引长度是6，如用A_B索引时key_len=5则代表只用到了A索引

3. rows
    - 如果查询优化器决定使用全表扫描的方式对某个表执行查询时，执行计划的 rows 列就代表预计需要扫描的行 数
    - 如果使用索引来执行查询时，执行计划的 rows 列就代表预计扫描的索引记录行数
