###  MySQL 偶尔“抖”一下的那个瞬间，可能就是在刷脏页（flush）
    当内存数据页跟磁盘数据页内容不一致的时候，我们称这个内存页为“脏页”。内存数据写入到磁盘后，内存和磁盘上的数据页的内容就一致了，称为“干净页”。
    
### 什么情况会引发数据库的 flush 过程呢？
    1.InnoDB 的 redo log 写满了。这时候系统会停止所有更新操作，把 checkpoint 往前推进，redo log 留出空间可以继续写。
    2.系统内存不足。当需要新的内存页，而内存不够用的时候，就要淘汰一些数据页，空出内存给别的数据页使用。如果淘汰的是“脏页”，就要先将脏页写到磁盘。
    3. MySQL 认为系统“空闲”的时候
    4.MySQL 正常关闭的情况。这时候，MySQL 会把内存的脏页都 flush 到磁盘上，这样下次 MySQL 启动的时候，就可以直接从磁盘上读数据，启动速度会很快。
    
### InnoDB 用缓冲池（buffer pool）管理内存，缓冲池中的内存页有三种状态：
    第一种是，还没有使用的；
    第二种是，使用了并且是干净页；
    第三种是，使用了并且是脏页。
        当要读入的数据页没有在内存的时候，就必须到缓冲池中申请一个数据页。这时候只能把最久不使用的数据页从内存中淘汰掉：如果要淘汰的是一个干净页，就直接释放出来复用；
    但如果是脏页呢，就必须将脏页先刷到磁盘，变成干净页后才能复用
    1.一个查询要淘汰的脏页个数太多，会导致查询的响应时间明显变长；
    2.日志写满，更新全部堵住，写性能跌为 0，这种情况对敏感业务来说，是不能接受的。
    
### InnoDB 刷脏页的控制策略
     参数innodb_io_capacity 会告诉 InnoDB 你的磁盘能力，innodb_io_capacity 这个参数建议设置成磁盘的 IOPS。
     磁盘的 IOPS 可以通过 fio 这个工具来测试：
     fio -filename=$filename -direct=1 -iodepth 1 -thread -rw=randrw -ioengine=psync -bs=16k -size=500M -numjobs=10 -runtime=10 -group_reporting -name=mytest 
### 如果你来设计策略控制刷脏页的速度，会参考哪些因素呢？
    如果刷太慢，首先是内存脏页太多，其次是 redo log 写满。所以，InnoDB 的刷盘速度就是要参考这两个因素：一个是脏页比例，一个是 redo log 写盘速度。
### 如果一个高配的机器，redo log 设置太小，会发生什么情况。
    看到的现象就是磁盘压力很小，但是数据库出现间歇性的性能下跌。
### 。。。

