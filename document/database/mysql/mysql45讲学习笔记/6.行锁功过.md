### 两阶段锁协议
    在 InnoDB 事务中，行锁是在需要的时候才加上的，但并不是不需要了就立刻释放，而是要等到事务结束时才释放。这个就是两阶段锁协议
    
    如果你的事务中需要锁多个行，要把最可能造成锁冲突、最可能影响并发度的锁尽量往后放。
    
### 死锁和死锁检测
    当并发系统中不同线程出现循环资源依赖，涉及的线程都在等待别的线程释放资源时，就会导致这几个线程都进入无限等待的状态，称为死锁
    
    当出现死锁以后，有两种策略：
        1.一种策略是，直接进入等待，直到超时。这个超时时间可以通过参数 innodb_lock_wait_timeout 来设置(默认值是 50s)。
        2.另一种策略是，发起死锁检测，发现死锁后，主动回滚死锁链条中的某一个事务，让其他事务得以继续执行。将参数 innodb_deadlock_detect 设置为 on，表示开启这个逻辑
        
    怎么解决由这种热点行更新导致的性能问题呢?(原因：并发修改同一行时，死锁检测要耗费大量的 CPU 资源)
    1.临时把死锁检测关掉，这种方式业务有损，不合适
    2.控制并发度
    