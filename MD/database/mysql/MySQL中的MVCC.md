### MVCC(Multi-Version Concurrency Control)
    在InnoDB中，给每行增加两个隐藏字段来实现MVCC，一个用来记录数据行的创建时间，另一个用来记录行的过期时间（删除时间）。
    在实际操作中，存储的并不是时间，而是事务的版本号，每开启一个新事务，事务的版本号就会递增
### 默认的隔离级别（REPEATABLE READ）下
    SELECT
    读取创建版本小于或等于当前事务版本号，并且删除版本为空或大于当前事务版本号的记录。这样可以保证在读取之前记录是存在的。
    INSERT
    将当前事务的版本号保存至行的创建版本号
    UPDATE
    新插入一行，并以当前事务的版本号作为新行的创建版本号，同时将原记录行的删除版本号设置为当前事务版本号
    DELETE
    将当前事务的版本号保存至行的删除版本号
### 快照读和当前读
    快照读：读取的是快照版本，也就是历史版本
    当前读：读取的是最新版本
    普通的SELECT就是快照读，而UPDATE、DELETE、INSERT、SELECT ...  LOCK IN SHARE MODE、SELECT ... FOR UPDATE是当前读
    SELECT ... LOCK IN SHARE MODE
    给记录假设共享锁，这样一来的话，其它事务只能读不能修改，直到当前事务提交
    SELECT ... FOR UPDATE
    给索引记录加锁，这种情况下跟UPDATE的加锁情况是一样的
    
### 锁
    1.Record Locks（记录锁）：在索引记录上加锁。
    2.Gap Locks（间隙锁）：在索引记录之间加锁，或者在第一个索引记录之前加锁，或者在最后一个索引记录之后加锁。
    3.Next-Key Locks：在索引记录上加锁，并且在索引记录之前的间隙加锁。它相当于是Record Locks与Gap Locks的一个结合
    如果你对一个唯一索引使用了唯一的检索条件，那么只需锁定索引记录即可；如果你没有使用唯一索引作为检索条件，或者用到了索引范围扫描，
    那么将会使用间隙锁或者next-key锁以此来阻塞其它会话向这个范围内的间隙插入数据